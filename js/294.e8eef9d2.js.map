{"version":3,"file":"js/294.e8eef9d2.js","mappings":"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","sources":["webpack://petsfamily-vue/./src/views/Front/CartOrderView.vue","webpack://petsfamily-vue/./src/views/Front/CartOrderView.vue?ed8d"],"sourcesContent":["<template>\n  <loading :active=\"isLoading\" class=\"fs-1 text-secondary\"><dog-side-icon/>\n  <dog-side-icon/><dog-side-icon/></loading>\n  <div class=\"container mt-9 mb-lg-8 mb-6\">\n    <p class=\"fs-1 fs-md-6 text-center mb-4 mb-md-4\">確認訂單頁面</p>\n    <div class=\"row\">\n      <div class=\"col-12 col-md-6 col-lg-6\">\n        <p class=\"fs-4 fs-md-6\">訂單內容</p>\n        <table class=\"table table-striped align-middle\">\n          <thead>\n            <tr>\n              <th class=\"text-start\">商品照片</th>\n              <th class=\"text-start\">商品名稱</th>\n              <th class=\"text-center\">數量</th>\n              <th class=\"text-center\">單項金額</th>\n            </tr>\n          </thead>\n          <tbody v-if=\"cartData.carts\">\n            <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n              <td class=\"text-start\">\n                <div class=\"rounded rounded-3\" style=\"height: 100px; width: 100px;\n                  background-position: center center; background-size: cover;\"\n                  :style=\"{\n                    backgroundImage: `url(${item.product.imageUrl})`\n                  }\"\n                ></div>\n              </td>\n              <td class=\"text-start\">\n                {{ item.product.title }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.qty }}\n              </td>\n              <td class=\"text-center\">\n                NT{{ $filters.toThousands(item.total) }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"row d-flex align-items-center\">\n          <div class=\"col-6\">\n            <div class=\"input-group mb-3\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"請輸入優惠卷\"\n                aria-label=\"請輸入優惠卷\"\n                aria-describedby=\"button-addon2\"\n                v-model=\"coupon\">\n              <button\n                class=\"btn btn-secondary\"\n                type=\"button\"\n                id=\"button-addon2\"\n                @click=\"useCoupon\">\n                輸入優惠卷\n              </button>\n            </div>\n          </div>\n          <div class=\"col-6 text-end\">\n            <div v-if=\"cartData.final_total === cartData.total\">\n              <p>總金額 : NT{{ $filters.toThousands(cartData.total) }} 元</p>\n            </div>\n            <div v-else>\n              <del class=\"text-success text-opacity-50\">\n                總計 : NT{{ $filters.toThousands(cartData.total) }} 元\n              </del>\n              <p>折扣後金額 : NT{{ $filters.toThousands(cartData.final_total) }} 元</p>\n            </div>\n          </div>\n        </div>\n        <div>\n          <p class=\"fs-6 text-success\">\n            <BIconLightningChargeFill />\n            使用折扣碼 : petCoupon85\n          </p>\n        </div>\n      </div>\n      <div class=\"col-12 col-md-6 col-lg-6 justify-content-center\">\n        <p class=\"fs-4 fs-md-6\">填寫訂單資訊</p>\n        <Form ref=\"form\" v-slot=\"{ errors }\" @submit=\"createToOrder\">\n          <div class=\"mb-2\">\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\n            <Field\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              class=\"form-control\"\n              v-model=\"form.user.name\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n            ></Field>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-2\">\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\n            <Field\n              id=\"tel\"\n              name=\"電話\"\n              type=\"tel\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              :rules=\"isPhone\"\n              v-model=\"form.user.tel\"></Field>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-2\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <Field\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"required|email\"\n              v-model=\"form.user.email\"\n            ></Field>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-2\">\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\n            <Field\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['地址'] }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"></Field>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-2\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"></textarea>\n          </div>\n\n          <div class=\"text-end\">\n            <button type=\"submit\" class=\"btn btn-danger\"\n              :disabled=\"Object.keys(errors).length > 0 ||\n              cartData.carts.length === 0\">送出訂單</button>\n          </div>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/assets/js/emitter';\n\nexport default {\n  inject: ['emitter'],\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      coupon: '',\n      isLoading: false,\n    };\n  },\n  methods: {\n    getCart() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(apiUrl)\n        .then((res) => {\n          setTimeout(() => {\n            this.isLoading = false;\n          }, 1000);\n          this.cartData = res.data.data;\n        });\n    },\n    createToOrder() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.isLoading = true;\n      this.$http.post(apiUrl, { data: order })\n        .then((res) => {\n          setTimeout(() => {\n            this.isLoading = false;\n          }, 1000);\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              style: 'primary',\n              title: '訂單建立成功',\n            });\n          }\n          this.$refs.form.resetForm();\n          this.getCart();\n          this.form.message = '';\n          emitter.emit('get-cart');\n          this.$router.push(`/pay/${res.data.orderId}`);\n        })\n        .catch(() => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '訂單建立失敗',\n          });\n        });\n    },\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼';\n    },\n    useCoupon() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon,\n      };\n      this.$http.post(apiUrl, { data: coupon })\n        .then((res) => {\n          this.getCart();\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              style: 'primary',\n              title: '套用優惠卷成功',\n            });\n          }\n        })\n        .catch(() => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '套用優惠卷失敗',\n          });\n        });\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartOrderView.vue?vue&type=template&id=5d16869b\"\nimport script from \"./CartOrderView.vue?vue&type=script&lang=js\"\nexport * from \"./CartOrderView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\六角\\\\sideprojects\\\\petsfamily-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","_createVNode","_component_loading","active","$data","_component_dog_side_icon","_hoisted_2","_hoisted_5","_hoisted_7","carts","_createElementBlock","_hoisted_8","_Fragment","_renderList","item","key","id","style","product","imageUrl","_toDisplayString","title","qty","_ctx","toThousands","total","type","placeholder","$event","onClick","$options","final_total","_hoisted_17","_hoisted_18","_component_BIconLightningChargeFill","_hoisted_23","_component_Form","ref","onSubmit","errors","_hoisted_25","_component_Field","name","rules","user","_component_ErrorMessage","_hoisted_27","tel","_hoisted_29","email","_hoisted_31","address","_hoisted_33","cols","rows","message","disabled","Object","keys","length","_hoisted_35","inject","data","cartData","form","coupon","isLoading","methods","getCart","apiUrl","this","$http","get","then","res","setTimeout","createToOrder","order","post","success","emitter","emit","$refs","resetForm","$router","push","orderId","catch","isPhone","value","phoneNumber","test","useCoupon","code","mounted","__exports__","render"],"sourceRoot":""}