{"version":3,"file":"js/697.88c28720.js","mappings":"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","sources":["webpack://petsfamily-vue/./src/views/Front/CartView.vue","webpack://petsfamily-vue/./src/views/Front/CartView.vue?2af0"],"sourcesContent":["<template>\n  <loading :active=\"isLoading\" class=\"fs-1 text-secondary\"><dog-side-icon/>\n  <dog-side-icon/><dog-side-icon/></loading>\n  <div class=\"container mt-9 mb-lg-8 mb-6\">\n    <p class=\"fs-1 fs-md-6 text-center\">購物車頁面</p>\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <div class=\"text-end\">\n          <button class=\"btn btn-outline-danger\"\n          type=\"button\" @click=\"removeAllCart\"\n          :class=\"{'disabled':cartData.carts.length === 0 }\">清空購物車</button>\n        </div>\n        <table class=\"table table-striped table-hover align-middle\">\n            <thead>\n                <tr>\n                  <th class=\"text-start\" width=\"50\"></th>\n                  <th class=\"text-start\" width=\"150\">商品照片</th>\n                  <th class=\"text-start\" width=\"150\">商品名稱</th>\n                  <th class=\"text-center\" width=\"200\">數量</th>\n                  <th class=\"text-center\" width=\"150\">單位</th>\n                  <th class=\"text-center\" width=\"150\">小計</th>\n                </tr>\n            </thead>\n            <tbody>\n                <template v-if=\"cartData.carts\">\n                  <tr v-for=\"item in cartData.carts\" :key=\"item.id\" class=\"align-items-center\">\n                    <td class=\"text-center align-items-center\">\n                      <button type=\"button\"\n                        class=\"btn btn-outline-danger btn-sm\"\n                        @click=\"delCartItem(item.id)\">\n                        x\n                      </button>\n                    </td>\n                    <td class=\"text-start\">\n                      <div class=\"rounded rounded-3\" style=\"height: 100px; width: 100px;\n                        background-position: center center; background-size: cover;\"\n                        :style=\"{\n                          backgroundImage: `url(${item.product.imageUrl})`\n                        }\"\n                      ></div>\n                    </td>\n                    <td class=\"text-start\">\n                      {{ item.product.title }}\n                    </td>\n                    <td class=\"text-center\">\n                      <div class=\"input-group input-group-sm\">\n                        <!-- <div class=\"input-group\">\n                          <button class=\"btn btn-outline-secondary w-25\"\n                          type=\"button\" id=\"button-addon1\"\n                          @click=\"updateCartItem(item, 'minus')\">-</button>\n                          <input type=\"text\" class=\"form-control text-center\" min=\"1\"\n                            placeholder=\"\" aria-label=\"Example\n                            text with button addon\" aria-describedby=\"button-addon1\"\n                            v-model=\"item.qty\"\n                            @change=\"updateCartItem(item)\"\n                            :disabled=\"isLoadingItem === item.id\">\n                          <button class=\"btn btn-outline-secondary w-25\"\n                          type=\"button\" id=\"button-addon1\"\n                          @click=\"updateCartItem(item, 'add')\">+</button>\n                        </div> -->\n                        <select class=\"form-select\"\n                            v-model=\"item.qty\"\n                            @change=\"updateCartItem(item)\"\n                            :disabled=\"isLoadingItem === item.id\"\n                          >\n                            <option :value=\"num\" v-for=\"num in 20\" :key=\"`${num}-${item.id}`\"\n                            >{{ num }}</option>\n                        </select>\n                      </div>\n                    </td>\n                    <td class=\"text-center\">\n                      {{ item.product.unit }}\n                    </td>\n                    <td class=\"text-center\">\n                      {{ $filters.toThousands(item.total) }}\n                    </td>\n                  </tr>\n                </template>\n            </tbody>\n            <tfoot>\n                <tr class=\"text-end\">\n                    <td colspan=\"5\" class=\"text-end\">總計</td>\n                    <td class=\"text-center\">{{ $filters.toThousands(cartData.total) }}</td>\n                </tr>\n                <!-- <tr class=\"text-end\">\n                    <td colspan=\"5\" class=\"text-end\">輸入優惠卷</td>\n                    <td class=\"text-center\">{{ $filters.toThousands(cartData.total) }}</td>\n                </tr> -->\n            </tfoot>\n        </table>\n      </div>\n    </div>\n    <div class=\"row\">\n      <ul class=\"d-flex justify-content-between\">\n        <li>\n          <router-link class=\"btn btn-primary\n            text-center\" to=\"/products\">繼續購物</router-link>\n        </li>\n        <li>\n          <router-link class=\"btn btn-secondary text-center\"\n            to=\"order\"\n            :class=\"{'disabled':cartData.carts.length === 0 }\"\n          >下一步</router-link>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/assets/js/emitter';\n\nexport default {\n  inject: ['emitter'],\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      },\n      isLoadingItem: '',\n      isLoading: false,\n    };\n  },\n  methods: {\n    getCart() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(apiUrl)\n        .then((res) => {\n          setTimeout(() => {\n            this.isLoading = false;\n          }, 1000);\n          this.cartData = res.data.data;\n        });\n    },\n    delCartItem(id) {\n      this.isLoadingItem = id;\n      this.isLoading = true;\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.$http.delete(apiUrl)\n        .then((res) => {\n          setTimeout(() => {\n            this.isLoading = false;\n          }, 1000);\n          emitter.emit('get-cart');\n          this.getCart();\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              style: 'primary',\n              title: '刪除商品成功',\n            });\n          }\n          this.isLoadingItem = '';\n        })\n        .catch(() => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '刪除商品失敗',\n          });\n        });\n    },\n    updateCartItem(item) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const data = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.isLoadingItem = item.id;\n      this.isLoading = true;\n      this.$http.put(url, { data })\n        .then((res) => {\n          setTimeout(() => {\n            this.isLoading = false;\n          }, 1000);\n          this.getCart();\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              style: 'primary',\n              title: '更新商品數量成功',\n            });\n          }\n          this.isLoadingItem = '';\n        })\n        .catch(() => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '更新商品數量失敗',\n          });\n        });\n    },\n    removeAllCart() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`;\n      this.isLoading = true;\n      this.$http.delete(apiUrl)\n        .then((res) => {\n          setTimeout(() => {\n            this.isLoading = false;\n          }, 1000);\n          this.getCart();\n          emitter.emit('get-cart');\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              style: 'primary',\n              title: '商品已清空，回到商品列表繼續選購',\n            });\n          }\n          this.$router.push('/products');\n        })\n        .catch(() => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '商品清空失敗',\n          });\n        });\n    },\n    toThousands(number) {\n      const arr = String(number).split('.');\n      const num = arr[0];\n      const len = Math.ceil(num.length / 3) * 3;\n      const result = num.padStart(len, '0').match(/\\d{3}/g).join(',').replace(/^0+/, '');\n      return arr[1] ? `${result}.${arr[1]}` : result;\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=871b889e\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\六角\\\\sideprojects\\\\petsfamily-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","colspan","_createVNode","_component_loading","active","$data","_component_dog_side_icon","_hoisted_2","carts","length","type","onClick","$options","_hoisted_7","_createElementBlock","_Fragment","key","_renderList","item","id","_hoisted_9","style","product","imageUrl","_toDisplayString","title","qty","$event","onChange","disabled","num","value","_hoisted_15","unit","_ctx","toThousands","total","_hoisted_19","_component_router_link","to","inject","data","cartData","isLoadingItem","isLoading","methods","getCart","apiUrl","this","$http","get","then","res","setTimeout","delCartItem","delete","emitter","success","emit","catch","updateCartItem","url","product_id","put","removeAllCart","$router","push","number","arr","String","split","len","Math","ceil","result","padStart","match","join","replace","mounted","__exports__","render"],"sourceRoot":""}